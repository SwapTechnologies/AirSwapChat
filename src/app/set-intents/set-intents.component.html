<div>
  <h2>Signal Your Intents to Trade on the Indexer</h2>
  <div *ngIf="balanceTooLow; else enoughBalance">
    <p>Your AST balance too low! You need 250 AST to interact with the Indexer.</p>
  </div>
  <ng-template #enoughBalance>
    <div>

      <button 
      mat-icon-button 
      color="primary"
      matTooltip="Refresh the custom token list"
      (click)="refreshTokens()">
        <mat-icon>autorenew</mat-icon>
      </button>
      <mat-form-field>
        <mat-select 
        placeholder="Add signal you sell" 
        [(value)]="makerToken">
          <mat-option 
          *ngFor="let token of tokenService.validatedTokens | callback: filterEther" 
          [value]='token'>
            {{token.name}}
          </mat-option>
          <mat-optgroup label="User Added Tokens">
            <mat-option 
            *ngFor="let token of tokenService.customTokens" 
            [value]="token">
              {{ token.name }}
            </mat-option>
          </mat-optgroup>
        </mat-select>
        <mat-hint *ngIf="makerToken">{{makerToken.address.slice(0,14)}}...</mat-hint>
      </mat-form-field>
      <mat-form-field>
        <mat-select 
        placeholder="when others give you" 
        [(value)]="takerToken">
          <mat-option 
          *ngFor="let token of tokenService.validatedTokens" 
          [value]='token'>
            {{token.name}}
          </mat-option>
          <mat-optgroup label="User Added Tokens">
            <mat-option 
            *ngFor="let token of tokenService.customTokens" 
            [value]="token">
              {{ token.name }}
            </mat-option>
          </mat-optgroup>
        </mat-select>
        <mat-hint *ngIf="takerToken">{{takerToken.address.slice(0,14)}}...</mat-hint>
      </mat-form-field>
      <button 
        mat-icon-button 
        color="primary"
        matTooltip="Add intent to indexer"
        (click)="addTokenPair()">
        <mat-icon>add</mat-icon>
      </button>
    </div>
    
    <div *ngIf="myIntents.length > 0" class="row">
      <p><i>Your intents are</i></p>
      <mat-selection-list 
      [(ngModel)]="intentsMarkedForRemoval"
      (ngModelChange)="changedList($event)">
        <mat-list-option *ngFor="let intent of myIntents" 
        [value]="intent">
          You want to sell {{tokenSymbol(intent.makerToken)}} 
          for {{tokenSymbol(intent.takerToken)}} 
        </mat-list-option>
      </mat-selection-list>
    </div>
  
    <div *ngIf="markedIntents">
      <button mat-raised-button (click)="removeMarkedIntents()">REMOVE MARKED INTENTS</button>
    </div>
    <p style='color:red;'>
      <strong>{{this.errorMessage}}</strong>
    </p>

    <div style='color:red;' *ngIf="unapprovedTokens.length > 0">
      <strong>
        You want to trade unapproved tokens. 
      </strong>
      <p>
        You have to approve them or the AirSwap smart contract is not able to swap the token for you.
      </p>
      <div class="row">
        <mat-list>
          <mat-list-item *ngFor="let token of unapprovedTokens"> 
            <button mat-raised-button
            [disabled]="clickedApprove[token]"
            (click)="approveMaker(token)">
              APPROVE {{tokenSymbol(token)}} 
            </button>        
          </mat-list-item>
        </mat-list>
      </div>
    </div>
  </ng-template>
</div>  